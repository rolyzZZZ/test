<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<div>
			<span>span</span>
			<h1>h1</h1>
			<h2>h2</h2>
			<strong>strong</strong>
			<h3>h3</h3>
			<h4>h4</h4>
			<p>p</p>
		</div>
		
		<script>
			var strong = document.getElementsByTagName('strong')[0];
			
			Element.prototype.elemSibling = function(n){
				var elem = this;
				
				// while(n){
				// 	if(n > 0){
				// 		if(elem.nextElementSibling){
				// 			elem = elem.nextElementSibling;
				// 		}else{ // 兼容ie9 -> nextSibling (会把文本节点选出来  所以要用nodeType过滤掉文本节点)
				// 			elem = elem.nextSibling;
				// 			for(; elem && elem.nodeType !== 1; elem = elem.nextSibling);
				// 		}
				// 		n--;
				// 	}else if(n < 0){
				// 		if(elem.previousElementSibling){
				// 			elem = elem.previousElementSibling;
				// 		}else{ // 兼容ie9 -> previousSibling (会把文本节点选出来  所以要用nodeType过滤掉文本节点)
				// 			elem = elem.previousSibling;
				// 			for(; elem && elem.nodeType !== 1; elem = elem.previousSibling);
				// 		}
				// 		n++;
				// 	}
				// }
				
				//or  优化
				while(n){
					if(n > 0){
						elem = elem.nextSibling;
						while(elem && elem.nodeType !== 1){
							elem = elem.nextSibling;
						}
						n--;
					}else if(n < 0){
						elem = elem.previousSibling;
						while(elem && elem.nodeType !== 1){
							elem = elem.previousSibling;
						}
						n++;
					}
				}
				
				return elem;
			}
			
			console.log(strong.elemSibling(-1));
		</script>
	</body>
</html>
